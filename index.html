<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Galaxia</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#05070c;
  --panel:#0b1424;
  --blue:#2ea3ff;
  --blue2:#0b5cff;
}
*{box-sizing:border-box;font-family:Inter,system-ui}

body{
  margin:0;
  background:radial-gradient(circle at top,#081a33,#05070c);
  color:white;
  height:100vh;
  overflow:hidden;
}

/* LOCK */
#lock{
  position:fixed;inset:0;
  background:#05070c;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
}
#lockBox{
  background:var(--panel);
  padding:36px;
  border-radius:22px;
  text-align:center;
  box-shadow:0 0 50px #2ea3ff44;
}

/* INPUTS */
input,button{
  background:#0e1a33;
  color:white;
  border:none;
  border-radius:14px;
  padding:12px 16px;
}
button{
  cursor:pointer;
  background:linear-gradient(135deg,var(--blue),var(--blue2));
}
button:hover{opacity:.9}

/* SIDEBAR */
#sidebar{
  position:fixed;
  left:0;top:0;bottom:0;
  width:220px;
  background:#070f1f;
  padding-top:10px;
}
.sidebtn{
  display:flex;
  gap:12px;
  padding:16px;
  margin:10px;
  border-radius:18px;
  cursor:pointer;
  align-items:center;
}
.sidebtn:hover{background:#2ea3ff22}

/* MAIN */
#main{
  margin-left:240px;
  padding:26px;
  height:100vh;
}

/* PANELS */
.panel{
  display:none;
  height:calc(100vh - 52px);
  background:rgba(11,20,36,.9);
  border-radius:26px;
  padding:26px;
}
.panel.active{display:block}

/* BROWSER */
#browserTop{display:flex;gap:12px;margin-bottom:16px}
iframe{
  width:100%;
  height:100%;
  border:none;
  border-radius:18px;
}

/* CHAT */
.chatBox{
  height:75%;
  overflow-y:auto;
  padding-right:6px;
}
.msg{
  background:#0e1a33;
  margin:10px 0;
  padding:12px;
  border-radius:16px;
  max-width:70%;
}
.chatInput{
  display:flex;
  gap:10px;
  margin-top:14px;
}
.name{
  font-size:12px;
  opacity:.7;
  margin-bottom:4px;
}
</style>
</head>

<body>

<!-- LOCK -->
<div id="lock">
  <div id="lockBox">
    <h2>üîí Galaxia Locked</h2>
    <input id="lockCode" placeholder="Enter code">
    <br><br>
    <button onclick="unlockSite()">Unlock</button>
  </div>
</div>

<!-- SIDEBAR -->
<div id="sidebar">
  <div class="sidebtn" onclick="openPanel('browser')">üåê Browser</div>
  <div class="sidebtn" onclick="openPanel('apiChat')">üí¨ Public Chat</div>
  <div class="sidebtn" onclick="openPremium()">üíé Premium Chat</div>
  <div class="sidebtn" onclick="openPanel('calc')">üßÆ Calculator</div>
  <div class="sidebtn" onclick="openPanel('clock')">üïí Clock</div>
  <div class="sidebtn" onclick="openAdmin()">üõ† Admin</div>
  <div class="sidebtn" onclick="openPanel('about')">‚ÑπÔ∏è About</div>
</div>

<div id="main">

<!-- BROWSER -->
<div id="browser" class="panel active">
  <div id="browserTop">
    <input id="search" placeholder="Search or URL" style="flex:1">
    <button onclick="go()">Go</button>
  </div>
  <iframe id="view" src="https://duckduckgo.com"></iframe>
</div>

<!-- PUBLIC CHAT -->
<div id="apiChat" class="panel">
  <input id="apiName" placeholder="Your name">
  <div class="chatBox" id="apiMsgs"></div>
  <div class="chatInput">
    <input id="apiInput" placeholder="Message">
    <button onclick="sendAPI()">Send</button>
  </div>
</div>

<!-- PREMIUM CHAT -->
<div id="premiumChat" class="panel">
  <input id="fbName" placeholder="Your name">
  <div class="chatBox" id="fbMsgs"></div>
  <div class="chatInput">
    <input id="fbInput" placeholder="Premium message">
    <button onclick="sendFB()">Send</button>
  </div>
</div>

<!-- CALC -->
<div id="calc" class="panel">
  <input id="calcIn" placeholder="2+2">
  <button onclick="calculate()">Calculate</button>
  <h2 id="calcOut"></h2>
</div>

<!-- CLOCK -->
<div id="clock" class="panel">
  <h1 id="time"></h1>
</div>

<!-- ADMIN -->
<div id="admin" class="panel">
  <h2>Admin Panel</h2>
  <button onclick="clearPremium()">Clear Premium Chat</button>
</div>

<!-- ABOUT -->
<div id="about" class="panel">
  <h2>About</h2>
  <p>Made 2026 by Williampitcher347@gmail.com</p>
</div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

const firebaseConfig={
 apiKey:"AIzaSyCPLk7btD2izv-d0u8GrlQV2VIwphrSkMU",
 databaseURL:"https://galaxia-chat-servers-2-default-rtdb.firebaseio.com"
};
const app=initializeApp(firebaseConfig);
const db=getDatabase(app);

/* PANEL */
window.openPanel=id=>{
 document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
 document.getElementById(id).classList.add('active');
};

/* LOCK */
if(localStorage.unlocked==="yes") lock.style.display="none";
window.unlockSite=()=>{
 if(lockCode.value==="2013"){
  localStorage.unlocked="yes";
  lock.style.display="none";
 } else alert("Wrong code");
};

/* BROWSER */
window.go=()=>{
 const q=search.value.trim();
 view.src=q.startsWith("http")?q:`https://duckduckgo.com/?q=${encodeURIComponent(q)}`;
};

/* CLOCK */
setInterval(()=>time.textContent=new Date().toLocaleTimeString(),1000);

/* CALC */
window.calculate=()=>{
 try{calcOut.textContent=Function(`return ${calcIn.value}`)();}
 catch{calcOut.textContent="Error";}
};

/* PUBLIC CHAT */
const apiURL="https://696fdb3ca06046ce61880d4c.mockapi.io/Galaxia-messages";
async function loadAPI(){
 const r=await fetch(apiURL);
 const d=await r.json();
 apiMsgs.innerHTML="";
 d.forEach(m=>{
  apiMsgs.innerHTML+=`<div class="msg"><div class="name">${m.name}</div>${m.text}</div>`;
 });
 apiMsgs.scrollTop=apiMsgs.scrollHeight;
}
loadAPI();

window.sendAPI=async()=>{
 if(!apiInput.value||!apiName.value) return;
 await fetch(apiURL,{
  method:"POST",
  headers:{'Content-Type':'application/json'},
  body:JSON.stringify({name:apiName.value,text:apiInput.value})
 });
 apiInput.value="";
 loadAPI();
};

/* PREMIUM CHAT ‚Äî FIXED PATH */
const premiumRef = ref(db,"premiumMessages");

onValue(premiumRef,snap=>{
 fbMsgs.innerHTML="";
 snap.forEach(c=>{
  const m=c.val();
  fbMsgs.innerHTML+=`<div class="msg"><div class="name">${m.name}</div>${m.text}</div>`;
 });
 fbMsgs.scrollTop=fbMsgs.scrollHeight;
});

window.sendFB=()=>{
 if(!fbInput.value||!fbName.value) return;
 push(premiumRef,{name:fbName.value,text:fbInput.value});
 fbInput.value="";
};

/* UNLOCKS */
window.openPremium=()=>{
 if(prompt("Premium Code")==="William2013") openPanel("premiumChat");
};
window.openAdmin=()=>{
 if(prompt("Admin Code")==="WP2013") openPanel("admin");
};
window.clearPremium=()=>{
 remove(premiumRef);
};
</script>

</body>
</html>
