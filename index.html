<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Galaxia Browser</title>

<style>
/* ===== GLOBAL ===== */
*{box-sizing:border-box;font-family:Segoe UI,Roboto}
body{
  margin:0;
  background:radial-gradient(circle at top,#0a1a3a,#000);
  color:#9fd3ff;
  overflow:hidden;
}
button,input{
  border:none;
  border-radius:14px;
  padding:10px;
  background:#0d2b55;
  color:#9fd3ff;
}
button:hover{background:#124080}
input{outline:none}

/* ===== LOCK ===== */
#lock{
  position:fixed;inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
}
#lockBox{
  background:#020b1c;
  padding:40px;
  border-radius:22px;
  box-shadow:0 0 30px #1aa3ff;
}

/* ===== LAYOUT ===== */
#app{display:flex;height:100vh}
#side{
  width:90px;
  background:#020b1c;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:10px;
  gap:10px;
}
.sidebtn{
  width:70px;
  height:70px;
  border-radius:20px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  background:#081a33;
}
.sidebtn.active{box-shadow:0 0 15px #1aa3ff}

#main{flex:1;padding:20px;overflow:hidden}
.page{display:none;height:100%}
.page.active{display:block}

/* ===== CHAT ===== */
.chatBox{
  height:80%;
  overflow:auto;
  background:#020b1c;
  border-radius:20px;
  padding:10px;
}
.msg{margin:5px 0;padding:8px;border-radius:14px;background:#081a33}

/* ===== TOOLS ===== */
#calcGrid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
}
#calcGrid button{height:60px}

/* ===== ADMIN ===== */
.adminBtn{
  margin-left:10px;
  background:#401010;
}
</style>
</head>

<body>

<!-- LOCK -->
<div id="lock">
  <div id="lockBox">
    <h2>Enter Access Code</h2>
    <input id="lockCode" placeholder="Code">
    <button onclick="unlockSite()">Unlock</button>
  </div>
</div>

<div id="app">

<!-- SIDEBAR -->
<div id="side">
  <div class="sidebtn active" onclick="openTab('browser',this)">üåê</div>
  <div class="sidebtn" onclick="openTab('apiChat',this)">üí¨</div>
  <div class="sidebtn" onclick="unlockPremium()">üíé</div>
  <div class="sidebtn" onclick="openTab('calc',this)">üßÆ</div>
  <div class="sidebtn" onclick="openTab('clock',this)">üïí</div>
  <div class="sidebtn" onclick="unlockAdmin()">üõ°</div>
</div>

<!-- MAIN -->
<div id="main">

<!-- BROWSER -->
<div id="browser" class="page active">
  <input id="url" placeholder="Search or URL">
  <button onclick="go()">Go</button>
  <iframe id="frame" style="width:100%;height:90%;border-radius:20px" src="https://duckduckgo.com"></iframe>
</div>

<!-- API CHAT -->
<div id="apiChat" class="page">
  <h2>API Chat (Public)</h2>
  <div id="apiMsgs" class="chatBox"></div>
  <input id="apiInput"><button onclick="sendAPI()">Send</button>
</div>

<!-- FIREBASE CHAT -->
<div id="fbChat" class="page">
  <h2>Firebase Chat (Premium)</h2>
  <div id="fbMsgs" class="chatBox"></div>
  <input id="fbInput"><button onclick="sendFB()">Send</button>
</div>

<!-- CALCULATOR -->
<div id="calc" class="page">
  <input id="calcOut" readonly>
  <div id="calcGrid"></div>
</div>

<!-- CLOCK -->
<div id="clock" class="page">
  <h1 id="time"></h1>
  <p id="date"></p>
</div>

<!-- ADMIN -->
<div id="admin" class="page">
  <h2>Admin Panel</h2>
  <div id="adminMsgs"></div>
</div>

</div>
</div>

<script type="module">
/* ===== DEVICE ===== */
if(!localStorage.device) localStorage.device=crypto.randomUUID();
const DEVICE=localStorage.device;

/* ===== SITE LOCK ===== */
function unlockSite(){
  if(lockCode.value==="2013"){
    lock.style.display="none";
  } else alert("Wrong code");
}

/* ===== NAV ===== */
window.openTab=(id,el)=>{
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.querySelectorAll(".sidebtn").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  if(el) el.classList.add("active");
};

/* ===== BROWSER ===== */
window.go=()=>{
  let u=url.value;
  if(!u.startsWith("http")) u="https://duckduckgo.com/?q="+encodeURIComponent(u);
  frame.src=u;
};

/* ===== API CHAT ===== */
const API="https://696fdb3ca06046ce61880d4c.mockapi.io/Galaxia-messages";
async function loadAPI(){
  const d=await fetch(API).then(r=>r.json());
  apiMsgs.innerHTML="";
  d.forEach(m=>apiMsgs.innerHTML+=`<div class="msg">${m.user}: ${m.text}</div>`);
}
setInterval(loadAPI,2000);
window.sendAPI=async()=>{
  await fetch(API,{method:"POST",headers:{"Content-Type":"application/json"},
  body:JSON.stringify({user:getUser(),text:apiInput.value})});
  apiInput.value="";
};

/* ===== PREMIUM LOCK ===== */
window.unlockPremium=()=>{
  if(prompt("Premium Code")==="William2013"){
    openTab("fbChat");
  } else alert("Denied");
};

/* ===== FIREBASE ===== */
import {initializeApp} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {getDatabase,ref,push,onValue,set,remove} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const app=initializeApp({
  apiKey:"AIzaSyCPLk7btD2izv-d0u8GrlQV2VIwphrSkMU",
  authDomain:"galaxia-chat-servers-2.firebaseapp.com",
  databaseURL:"https://galaxia-chat-servers-2-default-rtdb.firebaseio.com",
  projectId:"galaxia-chat-servers-2"
});
const db=getDatabase(app);

onValue(ref(db,"messages"),s=>{
  fbMsgs.innerHTML="";
  s.forEach(c=>{
    const m=c.val();
    fbMsgs.innerHTML+=`<div class="msg">${m.user}: ${m.text}</div>`;
    adminMsgs.innerHTML+=`<div class="msg">
      ${m.user}: ${m.text}
      <button class="adminBtn" onclick="ban('${m.device}')">Ban</button>
      <button class="adminBtn" onclick="mute('${m.device}')">Mute</button>
    </div>`;
  });
});

window.sendFB=()=>{
  push(ref(db,"messages"),{user:getUser(),text:fbInput.value,device:DEVICE});
  fbInput.value="";
};

/* ===== ADMIN ===== */
window.unlockAdmin=()=>{
  if(prompt("Admin Code")==="WP2013") openTab("admin");
};

/* ===== TOOLS ===== */
const btns="789/456*123-0.=+".split("");
btns.forEach(b=>{
  let x=document.createElement("button");
  x.textContent=b;
  x.onclick=()=>calcOut.value+=b==="="?eval(calcOut.value):b;
  calcGrid.appendChild(x);
});
setInterval(()=>{
  const d=new Date();
  time.textContent=d.toLocaleTimeString();
  date.textContent=d.toDateString();
},1000);

/* ===== ACCOUNT ===== */
function getUser(){
  return localStorage.user||"Guest";
}
</script>

</body>
</html>
