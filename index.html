<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Galaxia</title>

<style>
*{box-sizing:border-box;font-family:Segoe UI,Roboto}
body{
  margin:0;
  background:radial-gradient(circle at top,#0b1f3f,#000);
  color:#9fd3ff;
}
button,input{
  background:#0d2b55;
  color:#9fd3ff;
  border:none;
  border-radius:16px;
  padding:10px;
}
button:hover{background:#144a8a}
input{outline:none}

/* LOCK */
#lock{
  position:fixed;inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
}
#lockBox{
  background:#020b1c;
  padding:30px;
  border-radius:24px;
  box-shadow:0 0 40px #1aa3ff;
}

/* LAYOUT */
#app{display:flex;height:100vh}
#side{
  width:90px;
  background:#020b1c;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:10px;
  gap:10px;
}
.sidebtn{
  width:70px;height:70px;
  border-radius:22px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  background:#081a33;
}
.sidebtn.active{box-shadow:0 0 18px #1aa3ff}

#main{flex:1;padding:20px}
.page{display:none;height:100%}
.page.active{display:block}

/* CHAT */
.chatBox{
  height:75%;
  overflow:auto;
  background:#020b1c;
  border-radius:20px;
  padding:10px;
}
.msg{margin:6px 0;padding:10px;border-radius:16px;background:#081a33}
.adminBtn{margin-left:6px;background:#401010}
</style>
</head>

<body>

<!-- LOCK -->
<div id="lock">
  <div id="lockBox">
    <h2>Enter Access Code</h2>
    <input id="lockInput">
    <br><br>
    <button onclick="unlockSite()">Unlock</button>
  </div>
</div>

<div id="app">

<!-- SIDEBAR -->
<div id="side">
  <div class="sidebtn active" onclick="openTab('browser',this)">ğŸŒ</div>
  <div class="sidebtn" onclick="openTab('apiChat',this)">ğŸ’¬</div>
  <div class="sidebtn" onclick="unlockPremium()">ğŸ’</div>
  <div class="sidebtn" onclick="openTab('calc',this)">ğŸ§®</div>
  <div class="sidebtn" onclick="openTab('clock',this)">ğŸ•’</div>
  <div class="sidebtn" onclick="unlockAdmin()">ğŸ›¡</div>
</div>

<div id="main">

<!-- BROWSER -->
<div id="browser" class="page active">
  <input id="url" placeholder="Search or URL">
  <button onclick="go()">Go</button>
  <iframe id="frame" style="width:100%;height:90%;border-radius:20px" src="https://duckduckgo.com"></iframe>
</div>

<!-- API CHAT -->
<div id="apiChat" class="page">
  <h2>API Chat (Public)</h2>
  <div id="apiMsgs" class="chatBox"></div>
  <input id="apiInput">
  <button onclick="sendAPI()">Send</button>
</div>

<!-- FIREBASE CHAT -->
<div id="fbChat" class="page">
  <h2>Firebase Chat (Premium)</h2>
  <div id="fbMsgs" class="chatBox"></div>
  <input id="fbInput">
  <button onclick="sendFB()">Send</button>
</div>

<!-- CALC -->
<div id="calc" class="page">
  <input id="calcOut" readonly>
  <div id="calcBtns"></div>
</div>

<!-- CLOCK -->
<div id="clock" class="page">
  <h1 id="time"></h1>
  <p id="date"></p>
</div>

<!-- ADMIN -->
<div id="admin" class="page">
  <h2>Admin Panel</h2>
  <div id="adminMsgs"></div>
</div>

</div>
</div>

<script>
/* DEVICE */
if(!localStorage.device) localStorage.device=crypto.randomUUID();
const DEVICE=localStorage.device;

/* LOCK */
function unlockSite(){
  if(lockInput.value==="2013"){
    document.getElementById("lock").style.display="none";
  } else alert("Wrong code");
}

/* NAV */
function openTab(id,el){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.querySelectorAll(".sidebtn").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  if(el) el.classList.add("active");
}

/* BROWSER */
function go(){
  let u=url.value;
  if(!u.startsWith("http")) u="https://duckduckgo.com/?q="+encodeURIComponent(u);
  frame.src=u;
}

/* USER */
function getUser(){
  return localStorage.user||"Guest";
}

/* API CHAT */
const API="https://696fdb3ca06046ce61880d4c.mockapi.io/Galaxia-messages";
async function loadAPI(){
  const d=await fetch(API).then(r=>r.json());
  apiMsgs.innerHTML="";
  d.forEach(m=>apiMsgs.innerHTML+=`<div class="msg">${m.user}: ${m.text}</div>`);
}
setInterval(loadAPI,2000);

async function sendAPI(){
  await fetch(API,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({user:getUser(),text:apiInput.value})
  });
  apiInput.value="";
}

/* PREMIUM */
function unlockPremium(){
  if(prompt("Premium Code")==="William2013"){
    openTab("fbChat");
  } else alert("Denied");
}

/* FIREBASE */
const fbApp = firebase.initializeApp({
  apiKey:"AIzaSyCPLk7btD2izv-d0u8GrlQV2VIwphrSkMU",
  databaseURL:"https://galaxia-chat-servers-2-default-rtdb.firebaseio.com"
});
const db=firebase.database();

db.ref("messages").on("value",s=>{
  fbMsgs.innerHTML="";
  adminMsgs.innerHTML="";
  s.forEach(c=>{
    const m=c.val();
    fbMsgs.innerHTML+=`<div class="msg">${m.user}: ${m.text}</div>`;
    adminMsgs.innerHTML+=`
      <div class="msg">
        ${m.user}: ${m.text}
        <button class="adminBtn" onclick="ban('${m.device}')">Ban</button>
        <button class="adminBtn" onclick="mute('${m.device}')">Mute</button>
      </div>`;
  });
});

function sendFB(){
  db.ref("messages").push({
    user:getUser(),
    text:fbInput.value,
    device:DEVICE
  });
  fbInput.value="";
}

/* ADMIN */
function unlockAdmin(){
  if(prompt("Admin Code")==="WP2013") openTab("admin");
}
function ban(id){db.ref("bans/"+id).set(true)}
function mute(id){db.ref("mutes/"+id).set(true)}

/* CALC */
const calcBtns="789/456*123-0.=+".split("");
calcBtns.forEach(b=>{
  const x=document.createElement("button");
  x.textContent=b;
  x.onclick=()=>calcOut.value+=b==="="?eval(calcOut.value):b;
  calcBtnsDiv.appendChild(x);
});

/* CLOCK */
setInterval(()=>{
  const d=new Date();
  time.textContent=d.toLocaleTimeString();
  date.textContent=d.toDateString();
},1000);
</script>

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

</body>
</html>
